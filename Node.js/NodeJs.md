Node.js는 자바스크립트 런타임입니다.
자바스크립트 런타임은 자바스크립트가 실행되는환경
JS는 브라우저 내에서만 사용가능
Node.js를 통해 서버, 머신러닝, 데스크탑앱 사용가능
자바스크립트를 이용할 수 있는 분야가 넒어짐
이벤트 기반
이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식

실행순서대로 호출스택을 쌓고 백그라운드 작업이 필요 작업은 백그라운드로 이동
백그라운드 작업 완료 테스크큐로 이동
호출스택들이 다 완료되면 이벤트 루프가 테스큐 작업을 호출 스택으로 이동
이벤트 루프

논 블로킹 I/O
이전 작업이 완료될때까지 기다리지 않고, 다음 작업 수행
오래걸리는 작업은 백그라운드에서 처리
요청을 바로 받을수 있음

블로킹 I/O
3분이 걸리는 작업 
클라이언트 3분동안 쉼 서버도 3분동안 처리
예를 들어 3시간동안 작업해야된다면 클라이언트는 3시간동안 대기 서버는 3시간동안 처리가 끝나고 나서 일을 처리

싱글 스레드
스레드 = 작업을 실행하는 단위

싱글 스레드
주어진 작업을 혼자 처리
스레드에 문제가 생길 시 전체에 문제 생김
메모리나 기타 자원을 효율적으로 사용

멀티스레드
여러개 스레드로 나눠 처리
하나의 스레드가 문제 생겨도 다른 스레드로 대체 가능
스레드간의 작업 전환 비용, 놀고 있는 스레드 문제 발생

장점
1. 싱글 스레드. 논블로킹 I/O에 따른 빠른속도
2. 컴퓨터 자원을 덜 사용
3. I/O작업이 많은 서버로 적합(채팅, 스트리밍)
4. JavaScipt를 사용하기에 프론트엔드 개발자 사용 용이
5. 생산성이 높음

단점
1. 싱글 스레드 기반 자원 많이 먹는 작업 부하가 크게 걸림
2. 싱글 스레드는 CPU 코어하나 사용 게임서버 부적함
3. 로직 복잡한 경우 콜백함수 느에 빠짐
4. 에러가 발생하면 프로세스 자체가 죽어버림 (PM2 사용)

Node.js 사용하기 좋은 플젝
1. 간단한 로직 구성된 서비스
2. 빠른 응답시간이 요구되는 서비스
3. 빠른 개발이 요구되는 서비스
4. 비동기방식에 어울리는 서비스(채팅, 스트리밍 서비스)

넷플, 페이팔, 링크드인, 페이스북에서 사용

var, let, const 알아보기

var : function scope(범위)를 가진 변수
변수에 접근할 수 있는 범위

ES6 이후 나온 변수 선언 방식
let: 값을 재정의 할수 있음 (변수)
const: 값을 재정의 할 수 없는 변수 선언 방식 (상수)

Arrow function
function 키워드보다 간단하게 함수표현 가능

비구조화 할당
객체, 배열안의 값을 추출해서 변수, 상수에 바로 선언하는법

객체안의 값을 쉽게 상수나 변수에 할당가능
배열에서도 사용가능

promise, async, await

동기적 순서대로
비동기적 먼저 끝나는 순서대로

JS에서는 callback 방식을 사용함
일련적인 flow를 사용

callback hell
```
A((a)=>{
  B(a,(b)=>{
    C(b,(c)=>{
      console.log("callback hell")
    })
  })
});
```

promise 문법을 통해 callback hell을 탈출 가능함

#### Server 란?
네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 혹은 프로그램

### API 서버 구축
클라이언트 --------> 서버
          <--------

### npm
처음부터 모든 것을 개발 = 비효율
http 패키지는 다른 개발자가 만들어 놓은 패키지 사용 = 효율 UP

JS에는 다양한 패키지 존재
방대한 패키지를 설치 / 관리 필요함
npm 사용함 
Node.js로 만들어진 패키지를 설치하고 관리해주는 툴

패키지 설치하다보면 서로 의존되는 패키지들 존재함
패키지의 버전마다 기능이 다를 수 있는 문제
특정 버전 패키지가 필요할수도 있음
설치한 패키지 버전을 관리해주는 것이 
package.json으로 관리

### express, nodemon

#### express
빠르고 간편한 웹 프레임워크
프레임워크 = 프로그램을 만들기 위한 기본틀

기존 방식
1. req.url 파싱
2. req.method 확인
3. 쿼리문 파싱

express
1. req.get('경로')
2. req.query로 확인

express-generator
사용하면 www파일생성 포트번호
publlic : JS, CSS, images 올라감

routers : 페이지 라우팅과 관련된 파일 저장 실제서버 로직 작성

views : 템플릿파일 jade, ejs
HTML 코드안에 JS 코드 사용 가능함! 

app.js : 핵심적인 서버 역할
라우팅의 시작점

package.json 의존성 관리 및 버전 관리

#### Routing
요청에 따라 처리를 해주는 것

## STEP 4 express에서 HTTP method 적용
HTTP method 서버에 요청을 보내는 방법
* GET : 요청 받은 정보를 검색(READ)하여 응답
* POST : 요청된 자원을 생성(create)
* PUT : 요청된 자원을 수정(UPDATE)
* DELETE : 요청된 자원을 삭제(DELETE)

### 미들웨어 (middleware)

req  ---------------> res
요청 <--------------- 응답
목적에 맞게 처리하는 함수들

### multer

파일을 업로드할 때 유용한 패키지
이미지 업로드 서버 구축
upload.single("image");
upload : 파일 업로드 방식을 upload에 저장
single("image") : 파일 1개 업로드 image라는 FormData 전송

업로드 된 파일은 req.file
나머지 요청 데이터는 req.body

### EJS
ejs(Embedded Javascript Template)
템플릿 엔진 
JS 변수를  view 파일 내에서도 사용가능

JS 코드 사용
<% ... %>

변수 출력
<%= data %>

ejs 분할
<%- include 파일명 %>

### express-session
로그인 기능 구현한다고 가정하면

사용자는 로그인을 할때 username, password를 서버에 보냄 - 로그인요청
서버는 이에 대한 값으로 OK를 함
사용자가 로그인되었다는 상태 저장은 하지 않음
upload 요청을 사용자가 보내면 서버는 로그인 확인을 할수가 없음

이렇기 때문에 session을 서버에 저장하여 연결상태를 확인하는것
session을 사용하면 사용자가 id, pw를 서버에 보내면 서버는 세션에 있는 userinfo를 사용하여 사용자의 요청에 응답가능함

### NoSQL
DataBase : 데이터를 구조화하여 저장시켜 놓은 집합체
DB에 정보를 요청하는것? => Query
SQL : Query문을 구조적으로 체계화
schema(스키마) : 어떠한 구조로, 어떤 제약조건으로 저장되어야하는지 정의한 것

장점: 명확하게 정의된 스키마 데이터를 중복없이 저장
단점: 덜 유연함 (스키마 수정 번거로움)

빅데이터는 정리는 SQL 어려움

NoSQL : 이러한 단점 해결! 스키마 없음, 관계 없음, JSON 형태(key,value)

장점: 유연함 속도빠름
단점: 데이터 일관성 보장 X

이러한 단점은 mongodb 사용해서 보완함

### MongoDB
NoSQL의 대표적인 DB
Document Oriented 
스키마제약 없음, Node.js 호환 좋음

### mongoose 
Documnet를 조회할 때 자바스크립트 Object로 바꿔주는 역할